<!-- {{/* }}

Table generation code from: 
https://www.mybluelinux.com/how-create-bootstrap-tables-in-hugo/

Table building with bootstrap classes: 
https://getbootstrap.com/docs/4.4/content/tables/


Example usage:

{{< datatable table_class="table table-dark table-striped table-bordered" >}}
| # | First          | Last     | Handle   |
|---|----------------|----------|----------|
| 1 | Mark           | Otto     | @mdo     |
| 2 | Jacob          | Thornton | @fat     |
| 3 | Larry the Bird |          | @twitter |
{{< /datatable >}}

{{< datatable table_class="table table-striped table-hover" thead_class="table-dark" >}}
| # | First          | Last     | Handle   |
|---|----------------|----------|----------|
| 1 | Mark           | Otto     | @mdo     |
| 2 | Jacob          | Thornton | @fat     |
| 3 | Larry the Bird |          | @twitter |
{{< /datatable >}}

{{< datatable table_class="table table-hover" thead_class="table-success" caption="My super caption" >}}
| # | First          | Last     | Handle   |
|---|----------------|----------|----------|
| 1 | Mark           | Otto     | @mdo     |
| 2 | Jacob          | Thornton | @fat     |
| 3 | Larry the Bird |          | @twitter |
{{< /datatable >}}

You can also put the caption on the top of the table with .caption-top.

Add .table-sm to make any .table more compact by cutting all cell padding in half.


*/}} -->

{{ $htmlTable := .Inner | markdownify }}
{{ $table_class := .Get "table_class" }}
{{ $thead_class := .Get "thead_class" }}
{{ if .Get "caption" }}
    {{ $caption := .Get "caption" }} 
    {{ $old_cap := "<table>" }}
    {{ $new_cap := printf "<table>\n<caption>%s</caption>" $caption }}
    {{ $htmlTable = replace $htmlTable $old_cap $new_cap }} 
{{ end }}
{{ $old_class := "<table>" }}
{{ $new_class := printf "<table class=\"%s\">" $table_class }}
{{ $htmlTable = replace $htmlTable $old_class $new_class }}
{{ $old_thead := "<thead>" }}
{{ $new_thead := printf "<thead class=\"%s\">" $thead_class }}
{{ $htmlTable = replace $htmlTable $old_thead $new_thead }}
<div class="table-responsive">
{{ $htmlTable | safeHTML }}
</div>